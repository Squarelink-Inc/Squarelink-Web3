var npmLibPackageExample=function(){"use strict";var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t};const e="production"===process.env.NODE_ENV?require("https"):require("http"),n="production"===process.env.NODE_ENV?"https://api.squarelink.com":"http://localhost:3007",s="production"===process.env.NODE_ENV?"https://app.squarelink.com":"http://localhost:8082",o=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},a=function(e){return new Promise((n,s)=>{const o=window.open(e,"Squarelink","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=450,height=700,left=-500,top=150");o.focus(),window.addEventListener("message",function(e){"squarelink"===e.data.origin&&(o.close(),window.removeEventListener("message",function(){}),n(t({},e.data,{origin:void 0})))},!1)})},i=function(t="GET",n,s){return new Promise((a,i)=>{"GET"===t&&e.get(`${n}?${o(s)}`,t=>{let e="";t.on("data",t=>{e+=t,console.log(e)}),t.on("end",()=>{a(JSON.parse(e))})}).on("error",t=>{i(t)})})};return class{constructor(t,e="mainnet",n={}){this.client_id=t,this.network=e||"mainnet",this.options=n}getCoinbase(){return new Promise(async(t,e)=>{this.accounts?t(this.accounts[0]):this.getAccounts().then(e=>{t(e[0])}).catch(t=>e(t))})}getAccounts(){return new Promise(async(t,e)=>{if(this.accounts)t(this.accounts);else{let e=`${s}/authorize?client_id=${this.client_id}&scope=[wallets:read]&response_type=token&widget=true`,o=(await a(e)).result;i("GET",`${n}/wallets`,{access_token:o}).then(e=>{let n=e.wallets.map(t=>t.address);this.accounts=n,t(n)})}})}async signMsg({message:t,params:e,method:n}){let i=`${s}/msg?client_id=560346b97085cb98cdc9&method=${n||"signMessage"}`;return i="signTypedMessage"===n?`${i}&params=${o(e)}`:`${i}&msg=${t}`,(await a(i)).result}async signTx({value:t,to:e,data:n}){let o=`${s}/tx?widget=true&method=eth_signTransaction&client_id=${this.client_id}&to=${e}&value=${t||"0"}`;return n&&(o=`${o}&data=${n}`),(await a(o)).result}}}();
//# sourceMappingURL=bundle.min.js.map
